library(Matrix)

#example 1
M1<-matrix(1:9,ncol=3)
M1
#     [,1] [,2] [,3]
#[1,]    1    4    7
#[2,]    2    5    8
#[3,]    3    6    9
rankMatrix(M1) #[1] 2

#example 2
M2<-matrix(1:36,nrow=6)
M2
#     [,1] [,2] [,3] [,4] [,5] [,6]
#[1,]    1    7   13   19   25   31
#[2,]    2    8   14   20   26   32
#[3,]    3    9   15   21   27   33
#[4,]    4   10   16   22   28   34
#[5,]    5   11   17   23   29   35
#[6,]    6   12   18   24   30   36
rankMatrix(M2) #[1] 2


#example 3
M3<-matrix(sample(0:9,100,replace=TRUE),nrow=20)
M3
#    [,1] [,2] [,3] [,4] [,5]
#[1,]    7    8    2    9    6
#[2,]    9    5    5    6    3
#[3,]    4    8    4    8    5
#[4,]    0    7    3    5    2
#[5,]    7    5    8    7    5
#[6,]    2    7    3    5    8
#[7,]    9    7    5    1    9
#[8,]    3    6    8    4    4
#[9,]    4    5    3    1    0
#[10,]    4    1    3    8    9
#[11,]    8    5    8    7    6
#[12,]    4    1    4    3    5
#[13,]    7    3    0    5    0
#[14,]    9    5    0    6    5
#[15,]    2    1    8    1    4
#[16,]    2    5    6    5    9
#[17,]    9    0    4    9    4
#[18,]    5    4    0    4    2
#[19,]    1    4    1    5    4
#[20,]    5    9    4    6    6

rankMatrix(M3)
#[1] 5

#example 4
M5<-matrix(sample(rnorm(20),25,replace=TRUE),nrow=5)
M5
#[,1]       [,2]       [,3]       [,4]       [,5]
#[1,]  0.9383252 -1.0604660  0.1640550  1.1648026  1.9820955
#[2,]  0.1948045 -0.7759389  0.1640550 -0.3923675 -0.5848674
#[3,] -0.7759389 -0.9971000  0.8832175  1.9820955  0.4972991
#[4,] -1.5935890 -0.3923675  0.8832175 -1.0604660  2.3995757
#[5,]  0.9383252 -1.5935890 -0.5848674  0.8832175 -1.5935890
rankMatrix(M5) #[1] 5


#example 5
M6<-matrix(c(3, 2, 6, 6, 4, 12),2,3,byrow = TRUE)
M6
#     [,1] [,2] [,3]
#[1,]    3    2    6
#[2,]    6    4   12
rankMatrix(M6)
rank(M6)


#example 6
M7<-matrix(c(3, 2, 6, 6, 4, 13),2,3,byrow = TRUE)
M7
#     [,1] [,2] [,3]
#[1,]    3    2    6
#[2,]    6    4   13
rankMatrix(M7) #2
